<main class="relative">
  <app-snowfall></app-snowfall>
  <section class="hero-section">
    <div class="relative mx-auto flex max-w-6xl flex-col gap-16 px-4 py-16 lg:flex-row lg:items-center lg:py-24">
      <div class="flex-1 space-y-6">
        <span class="badge-soft">
          <span class="material-symbols-outlined text-base">auto_awesome</span>
          Freshly Brewed Happiness
        </span>
        <div class="space-y-3">
          <div class="holiday-banner">
            <span role="img" aria-label="Santa">üéÖ</span>
            <div>
              <p class="text-sm font-semibold text-primary flex items-center">Happy Christmas from Santa Claus France sevran
                <span role="img" aria-label="India Flag" class="ml-1 inline-block text-base">
                  üáÆüá≥
                </span>
              !</p>
              <p class="text-xs text-muted">Enjoy a gentle snowfall while you explore and place orders without interruptions.</p>
            </div>
          </div>
          <div class="holiday-actions">
            <span class="holiday-pill">‚òï Explore festive brews</span>
            <span class="holiday-pill">üéÅ Claim seasonal rewards</span>
            <span class="holiday-pill">üöÄ Fast-track your pickup</span>
          </div>
        </div>
        <h1 class="hero-title text-4xl font-bold text-primary sm:text-5xl lg:text-6xl">
          Crafted coffees, gourmet bites, and a space designed for your best ideas.
        </h1>
        <p class="max-w-2xl text-lg text-muted">
          Discover a curated menu of artisanal beverages and signature desserts. Track your orders in real-time, breeze
          through quick re-orders, and enjoy a unified cafe experience across desktop and mobile.
        </p>
        <div class="flex flex-wrap items-center gap-4">
          <a routerLink="/menu" class="btn-primary">Explore Menu</a>
          <a routerLink="/register" class="inline-flex items-center text-sm font-semibold text-accent transition hover:text-primary">
            Become a member
            <span class="material-symbols-outlined ml-2 text-sm">arrow_forward</span>
          </a>
        </div>
        <div *ngIf="feedback" class="feedback-pill">
          <span class="material-symbols-outlined h-4 w-4" [ngClass]="{
            'text-accent': feedback?.type === 'success',
            'text-red-500': feedback?.type === 'error'
          }">
            {{ feedback.type === 'success' ? 'check_circle' : feedback.type === 'error' ? 'error' : 'star' }}
          </span>
          <span>{{ feedback.message }}</span>
        </div>
      </div>
      <div class="relative flex flex-1 justify-center">
        <div class="relative grid w-full max-w-md gap-6">
          <div *ngFor="let product of featuredProducts" class="card">
            <h3 class="brand-title text-2xl font-semibold text-primary">{{ product.name }}</h3>
            <p class="mt-2 text-sm text-muted">{{ product.description }}</p>
            <div class="mt-6 flex flex-wrap items-center justify-between gap-3">
              <span class="text-lg font-semibold text-accent">${{ product.price.toFixed(2) }}</span>
              <div class="flex flex-wrap items-center gap-2">
                <button
                  type="button"
                  (click)="addToCart(product)"
                  class="inline-flex items-center gap-2 rounded-full border border-[var(--card-border)] px-4 py-1.5 text-xs font-semibold text-secondary transition hover:border-[var(--accent)] hover:text-accent"
                >
                  <span class="material-symbols-outlined text-sm">add_shopping_cart</span>
                  Add to cart
                </button>
                <button
                  type="button"
                  (click)="buyNow(product)"
                  [disabled]="processingId === product.id"
                  class="btn-primary"
                >
                  {{ processingId === product.id ? 'Processing...' : 'Buy now' }}
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="pointer-events-none absolute -left-32 top-12 hidden h-72 w-72 rounded-full bg-[var(--accent-soft)] blur-3xl md:block"></div>
      </div>
    </div>
  </section>

  <section class="page-section">
    <div class="mx-auto max-w-6xl px-4">
      <div class="grid gap-8 md:grid-cols-3">
        <div class="card" *ngFor="let feature of [
          { title: 'Digital-first ordering', text: 'Plan ahead and schedule pickups with precise timing and order notes.' },
          { title: 'Coffee concierge', text: 'Save your favourites, receive curated recommendations, and explore pairings.' },
          { title: 'Rewards that matter', text: 'Earn beans for every purchase and redeem them for signature treats.' }
        ]">
          <h3 class="text-xl font-semibold text-primary">{{ feature.title }}</h3>
          <p class="mt-2 text-sm text-muted">{{ feature.text }}</p>
        </div>
      </div>
    </div>
  </section>

  <section class="page-section bg-[var(--surface-layer)]">
    <div class="mx-auto max-w-6xl px-4">
      <div class="grid gap-8 lg:grid-cols-[2fr,1fr]">
        <div class="card">
          <div class="flex items-center gap-3">
            <span class="material-symbols-outlined text-accent">rocket_launch</span>
            <div>
              <h2 class="text-xl font-semibold text-primary">Quick cart checkout</h2>
              <p class="text-sm text-muted">Add favourites and place an order right from the home page.</p>
            </div>
          </div>
          <div class="mt-6 space-y-4">
            <p *ngIf="cartItems.length === 0" class="text-sm text-muted">Your cart is empty. Add a beverage to get started.</p>
            <div
              *ngFor="let item of cartItems"
              class="flex flex-col gap-3 rounded-2xl border border-[var(--card-border)] bg-[var(--surface-layer)] p-4 sm:flex-row sm:items-center sm:justify-between"
            >
              <div>
                <p class="text-sm font-semibold text-primary">{{ item.name }}</p>
                <p class="text-xs text-muted">${{ item.price.toFixed(2) }} each</p>
              </div>
              <div class="flex items-center gap-3">
                <input
                  type="number"
                  min="1"
                  class="form-input w-20 text-center"
                  [value]="item.quantity"
                  (input)="updateQuantity(item.id, ($event.target as HTMLInputElement).valueAsNumber)"
                />
                <button
                  type="button"
                  (click)="removeFromCart(item.id)"
                  class="text-xs font-semibold text-muted transition hover:text-red-500"
                >
                  Remove
                </button>
              </div>
            </div>
          </div>
          <div class="mt-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
            <p class="text-sm text-muted">
              Cart total <span class="text-primary font-semibold">${{ cartTotal.toFixed(2) }}</span> ‚Ä¢ {{ cartCount }} item{{ cartCount === 1 ? '' : 's' }}
            </p>
            <button
              type="button"
              (click)="checkout()"
              [disabled]="processingCheckout"
              class="btn-primary w-full justify-center sm:w-auto"
            >
              {{ processingCheckout ? 'Placing order...' : 'Place order' }}
            </button>
          </div>
        </div>
        <div class="card">
          <h3 class="text-lg font-semibold text-primary">Experience Cafe Coffee Day anywhere</h3>
          <p class="mt-3 text-sm text-muted">
            Our progressive web experience ensures that whether you are on a bustling commute or working from a desktop, you will
            always have the cafe close at hand.
          </p>
          <ul class="mt-4 space-y-3 text-sm text-muted">
            <li>‚Ä¢ Mobile-first workflows with real-time updates</li>
            <li>‚Ä¢ Desktop dashboards for teams and office orders</li>
            <li>‚Ä¢ Rewards and recommendations tailored to you</li>
          </ul>
        </div>
      </div>
    </div>
  </section>
</main>
